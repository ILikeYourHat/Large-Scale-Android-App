scmVersion {
    tag {
        prefix = 'v'
    }
}

ext.scmVersionCode = {
    def match = scmVersion.version =~ /^(\d+)\.(\d{1,3})\.(\d{1,3})(-.*)?$/

    if (match.matches()) {
        def toNumber = { it?.isInteger() ? it as Integer : null }
        def major = toNumber(match[0][1])
        def minor = toNumber(match[0][2])
        def patch = toNumber(match[0][3])

        if (major != null && minor != null && patch != null) {
            return major * 10000 + minor * 100 + patch
        }
    }
    return 0
}

ext.scmVersionName = {
    return scmVersion.version
}